<% provide(:title, '報告一覧') %>
<%= content_for :side_menu do %>
  <%= render partial: 'layouts/sidebar' , locals: { user: @user, project: @project } %>
<% end %>

<div class="card-box">
  <p class="project-name-text">プロジェクト：<%= @project.project_name %></p>
  <h1 class="center">報告状況確認</h1>
  
    <div class="card-body">
      <div class="tab-content" id="myTabContent">
        <!-- あなたの報告一覧 -->
        <div class="tab-pane fade show active" id="you-report" role="tabpanel" aria-labelledby="you-report-tab">
          <div class="box-report-index">
            

            <div class="table-header">
              <div class="subject-name col-md-4">
                報告日
              </div>
              <div class="reported-date col-md-4">
                報告人数
              </div>
              <%# <div class="report-confirmer">
                確認者
              </div> %>
              <div class="report-action col-md-4">
                未報告者(仮)
              </div>
            </div>
            <div class="table-body">
              <% line_num = 0%>
              <% @days.zip(@not_report_users) do |day, users|%>
                <% line_num += 1%>
                <div class="table-line", data-project-index-line-num="<%="#{line_num}"%>" id="you_report">
                  <div class="subject-name col-md-4">
                    <%= l(day[0], format: :long) %>
                  </div>
                  
                  <%# <div class="report-confirmer">
                    <%= report.report_confirmers.where(report_confirmation_flag: true).count人 %>
                  <%# </div> %>
                  <div class="reported-date col-md-4">
                    <%= @project.users.all.count %>人中 <%= day[1].count('DISTINCT user_id') %> 人
                    <%# <div class="accordion" id="accordionExample">
                      <div class="card">
                        <div class="card-header" id="headingOne">
                          <h5 class="mb-0">
                            <button class="btn btn-link" type="button" data-toggle="collapse" data-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                              報告者
                            </button>
                          </h5>
                        </div>

                        <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                          <div class="card-body">
                            名前<br>
                            名前
                          </div>
                        </div>
                      </div>
                      
                      <div class="card">
                        <div class="card-header" id="headingThree">
                          <h5 class="mb-0">
                            <button class="btn btn-link collapsed" type="button" data-toggle="collapse" data-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                              未報告者
                            </button>
                          </h5>
                        </div>
                        <div id="collapseThree" class="collapse" aria-labelledby="headingThree" data-parent="#accordionExample">
                          <div class="card-body">
                            名前<br>
                            名前
                          </div>
                        </div>
                      </div>
                    </div> %>
                  </div>
                  <div class="report-action col-md-4">
                    <% users.each do |user| %>
                      <%= user.user_name %>
                      <br>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
